<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的购物车 - 摩尔购</title>
    <style>
        body { font-family: "Microsoft YaHei", sans-serif; background-color: #f0f3ef; color: #333; margin: 0; }
        .container { width: 1200px; margin: 0 auto; }
        
        .top-nav { background-color: #fff; padding: 20px 0; border-bottom: 2px solid #e6e6e6; margin-bottom: 20px; }
        .logo { font-size: 24px; font-weight: bold; color: #333; display: flex; align-items: center; }
        .logo span { font-size: 18px; margin-left: 10px; color: #666; font-weight: normal; }

        .cart-main { background-color: #fff; border-radius: 8px; padding: 20px; min-height: 400px; }
        .cart-header { display: flex; padding: 10px 0; border-bottom: 1px solid #ddd; font-weight: bold; color: #666; }
        .col-check { width: 50px; text-align: center; }
        .col-img { width: 100px; }
        .col-name { flex: 1; }
        .col-price { width: 150px; text-align: center; }
        .col-num { width: 150px; text-align: center; }
        .col-action { width: 100px; text-align: center; }

        .cart-item { display: flex; align-items: center; padding: 20px 0; border-bottom: 1px solid #eee; }
        .item-img { width: 80px; height: 80px; background-color: #f8f8f8; border: 1px solid #eee; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .item-img img { width: 100%; height: 100%; object-fit: contain; }
        .item-name { font-size: 14px; color: #333; }
        .item-price { font-weight: bold; }

        .empty-cart { text-align: center; padding: 50px 0; display: none; }
        .has-items { display: none; }

        .cart-footer { margin-top: 20px; height: 50px; background-color: #fff; display: flex; justify-content: space-between; align-items: center; border: 1px solid #ddd; padding-left: 20px; }
        .btn-return { color: #666; cursor: pointer; text-decoration: none; }
        .btn-return:hover { color: #FF4500; }
        .total-price { color: #e4393c; font-size: 20px; font-weight: bold; margin-right: 20px; }
        .btn-checkout { background-color: #e4393c; color: white; border: none; height: 100%; width: 120px; font-size: 18px; cursor: pointer; }

    </style>
</head>
<body>

    <div class="top-nav">
        <div class="container logo">
            MOLE 摩尔购 <span>购物车</span>
        </div>
    </div>

    <div class="container cart-main">
        <!-- 空购物车状态 -->
        <div id="empty-cart" class="empty-cart">
            <p style="font-size: 18px; color: #999; margin-bottom: 20px;">购物车空空如也，快去选购吧！</p>
            <a href="javascript:history.back()" class="btn-return" style="color: #FF4500; border: 1px solid #FF4500; padding: 5px 15px; border-radius: 4px;">返回上一页</a>
        </div>

        <!-- 有商品状态 -->
        <div id="cart-content" class="has-items">
            <div class="cart-header">
                <div class="col-check"><input type="checkbox" checked></div>
                <div class="col-img">商品信息</div>
                <div class="col-name"></div>
                <div class="col-price">单价</div>
                <div class="col-num">数量</div>
                <div class="col-action">操作</div>
            </div>
            
            <!-- 商品列表容器 -->
            <div id="item-list-container">
                <!-- JS动态插入 -->
            </div>
        </div>
    </div>

    <div class="container cart-footer" id="cart-footer" style="display: none;">
        <a href="javascript:history.back()" class="btn-return">< 返回上一页继续购物</a>
        <div>
            <span style="color: #666;">总价：</span>
            <span class="total-price" id="total-price">¥ 0.00</span>
            <button class="btn-checkout" onclick="alert('暂未开通支付功能')">去结算</button>
        </div>
    </div>

    <script>
        window.onload = function() {
            renderCart();
        };

        function renderCart() {
            const cartList = JSON.parse(localStorage.getItem('cartList') || '[]');
            const emptyDiv = document.getElementById('empty-cart');
            const contentDiv = document.getElementById('cart-content');
            const footerDiv = document.getElementById('cart-footer');
            const listContainer = document.getElementById('item-list-container');
            const totalPriceSpan = document.getElementById('total-price');

            if (cartList.length > 0) {
                emptyDiv.style.display = 'none';
                contentDiv.style.display = 'block';
                footerDiv.style.display = 'flex';
                
                let html = '';
                let total = 0;

                cartList.forEach((item, index) => {
                    const itemTotal = item.price * item.count;
                    total += itemTotal;
                    
                    html += `
                        <div class="cart-item">
                            <div class="col-check"><input type="checkbox" checked></div>
                            <div class="col-img">
                                <div class="item-img">
                                    <img src="${item.img}" alt="商品" onerror="this.src=''; this.alt='无图'">
                                </div>
                            </div>
                            <div class="col-name">
                                <div class="item-name">${item.name}</div>
                            </div>
                            <div class="col-price">¥ ${item.price.toFixed(2)}</div>
                            <div class="col-num">${item.count}</div>
                            <div class="col-action"><a href="#" onclick="removeItem(${index})" style="color:#666; text-decoration:none;">删除</a></div>
                        </div>
                    `;
                });

                listContainer.innerHTML = html;
                totalPriceSpan.innerText = '¥ ' + total.toFixed(2);
            } else {
                emptyDiv.style.display = 'block';
                contentDiv.style.display = 'none';
                footerDiv.style.display = 'none';
            }
        }

        function removeItem(index) {
            if(confirm('确定要删除这个商品吗？')) {
                let cartList = JSON.parse(localStorage.getItem('cartList') || '[]');
                cartList.splice(index, 1);
                
                // 更新存储
                localStorage.setItem('cartList', JSON.stringify(cartList));
                
                // 更新总数量
                let totalCount = 0;
                for(let item of cartList) totalCount += item.count;
                localStorage.setItem('cartCount', totalCount);

                // 重新渲染
                renderCart();
            }
        }
    </script>

</body>
</html>